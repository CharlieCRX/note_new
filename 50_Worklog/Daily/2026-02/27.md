# 2.27

## Modbus 协议

- 主-从控制模式：主站发起询问，从站平时保持沉默，点名时回答

- 数据类型：

  | **数据类型**                       | **读写属性** | **数据长度**   | **形象类比**             |
  | ---------------------------------- | ------------ | -------------- | ------------------------ |
  | **线圈 (Coils)**                   | 读写         | 1 bit (开/关)  | 控制开关、电机启停       |
  | **离散输入 (Discrete Inputs)**     | 只读         | 1 bit (开/关)  | 传感器感应状态、急停按钮 |
  | **保持寄存器 (Holding Registers)** | 读写         | 16 bits (数值) | 设定温度、配置参数       |
  | **输入寄存器 (Input Registers)**   | 只读         | 16 bits (数值) | 测量到的压力、实时电量   |

- 根据传输介质不同，Modbus 有三种变体

  - Modbus RTU：通过串口（RS-485 或 RS-232 ），加入 CRC 校验
  - Modbus TCP： 通过以太网（网线/Wi-Fi）， 速度极快，不再需要“校验码”

- 报文格式 (以 RTU 为例)

  - 当你发送一条指令时，它其实是一串 16 进制数字：

    ```
    01 03 00 00 00 02 C4 0B
    ```

    - **01**：设备地址（找 1 号从机）。
    - **03**：功能码（读保持寄存器）。
    - **00 00**：起始地址（从第 0 个寄存器开始）。
    - **00 02**：读取数量（读 2 个）。
    - **C4 0B**：CRC 校验码（防止信号干扰导致数据出错）。

## OBS Studio

好用的录屏软件:+1:

## 每日任务

- [x] 远程调试 Y 轴的运动
- [x] 学习如何使用 Modbus TCP 访问 PLC 寄存器（方便后续开发基于 Modbus TCP 的上位机软件）

已经远程调控完毕，并将视频 + 文字记录提交到远程端。